
<Label>:
    font_name: 'ui/fonts/Gotham-Book.ttf'
    font_size: '22sp'
    text_size: self.width-self.padding_x, self.height-self.padding_y
    padding: ('50sp', '5sp')
    valign: 'middle'
    halign: 'center'
    line_height: 1.3


<StatusBar>:
    height: 150
    size_hint: 1, None
    pos: 0, app.viewport.height - self.height * self.alpha_show

    Label:
        text: "Header                 Points:"
        canvas.before:
            Color:
                rgba: 0,0,0, 1.0
            Rectangle:
                pos: self.pos
                size: self.size

<ScreenManager>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'ui/images/bg.png'


<IntroScreen>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'ui/screens/intro/bg.png'

    Button:
        size: 800,250
        size_hint: None, None
        center: root.center
        background_normal: 'ui/screens/intro/btn.png'
        background_down: 'ui/screens/intro/btn_down.png'
        on_release: app.start_quiz()



<QuestionScreen>:
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'ui/screens/question/bg.png'
        Rectangle:
            pos: self.pos
            size: self.size
            source: root.bg_image

    on_reset: [x.reset() for x in (opt1, opt2, opt3, opt4)]

    BoxLayout:
        orientation: 'vertical'

        Label:
            font_name: 'ui/fonts/Gotham-Bold.ttf'
            font_size: '28sp'
            halign: 'left'
            text: root.text+"\n"

        GridLayout:
            on_parent: root.button_grid = self
            cols: 2
            padding: '20dp'
            spacing: '20dp'

            QuestionButton:
                id: opt1
                text: root.option_a
                on_release: app.check_answer(root, self, 1)
            QuestionButton:
                id: opt2
                text: root.option_b
                on_release: app.check_answer(root, self, 2)
            QuestionButton:
                id: opt3
                text: root.option_c
                on_release: app.check_answer(root, self, 3)
            QuestionButton:
                id: opt4
                text: root.option_d
                on_release: app.check_answer(root, self, 4)


<QuestionButton>:
    font_name: 'ui/fonts/Gotham-Bold.ttf' if self.alpha_rotation < 0.5 else 'ui/fonts/Gotham-Book.ttf'
    halign: 'center' if self.alpha_rotation < 0.5 else 'left'
    font_size: '22sp' if self.alpha_rotation < 0.5 else '14sp'
    background_normal: "ui/screens/question/qbg.png"
    background_down: "ui/screens/question/qbg_down.png"
    background_wrong: "ui/screens/question/qbg_wrong.png"


<AnswerScreen>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'ui/screens/answer/bg.png'

    Label:
        font_name: 'ui/fonts/Gotham-Bold.ttf'
        font_size: '76sp'
        halign: 'left'
        valign: 'bottom'
        size_hint_y: None
        text: root.feedback
        height: '100sp'
        y: root.height - sp(200)


    Label:
        halign: 'left'
        font_size: '25sp'
        valign: 'top'
        padding_y: '360sp'
        text: root.text+"\n"
        y: root.height - self.height


    BoxLayout:
        padding: '20dp'
        spacing: '20dp'
        size_hint: .8, 0.4
        on_parent: root.image_layout = self
        orientation: 'horizontal'


    Button:
        on_release: app.next_question()
        background_normal: "ui/screens/answer/nextbtn.png"
        background_down: "ui/screens/answer/nextbtn_down.png"
        size_hint: None, None
        size: '150sp','150sp'
        right: root.right - 50
        y: 50




<ResultsScreen>:
    canvas:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'ui/screens/results/bg.png'

    BoxLayout:
        orientation:'vertical'
        Label:
            font_name: 'ui/fonts/Gotham-Bold.ttf'
            font_size: '38sp'
            size_hint: 1, 0.5
            text: root.text
    Button:
        on_release: app.screen_manager.current = 'intro'
        size: 800,250
        size_hint: None, None
        center_x: root.center_x
        background_normal: 'ui/screens/results/donebtn.png'
        background_down: 'ui/screens/results/donebtn_down.png'
        y: 200

<ProgressionView>:
    auto_dismiss: False
    size_hint: None, None
    size: ('400sp', '250sp')

    BoxLayout:
        orientation: 'vertical'
        padding: '50dp'
        Label:
            text: root.text
        ProgressBar:
            value: root.progression

<AnswerImage>:
	mipmap: True

<AnswerImagePopup>:
	scatter: scatter
	background_color: (0, 0, 0, 1.0)
	background: 'ui/images/trans.png'

	ScatterPlane:
		id: scatter
		opacity: root.alpha
		Image:
			mipmap: True
			source: root.answer.source_full
			# for positionning, take care of the label
			size: root.width - dp(100), root.height - dp(150)
			pos: dp(50), dp(100)

	FloatLayout:
		Label:
			text: root.answer.text or 'Hello World'
			size_hint_y: None
			height: '50sp'
			font_size: '18sp'
			y: -(1 - root.alpha) * self.height
			on_touch_down: root.dismiss() if self.collide_point(*args[1].pos) else None

			canvas.before:
				Color:
					rgba: .05, .05, .05, .9
				Rectangle:
					pos: self.pos
					size: self.size
